<div class="board-container">
  <!-- Filters -->
  <div class="filters">
    <input
      type="text"
      class="search-box"
      placeholder="üîç Search by Title..."
      [(ngModel)]="searchQuery"
      (input)="applyFilters()"
    />

    <select [(ngModel)]="selectedUser" (change)="applyFilters()">
      <option value="">üë• All Users</option>
      <option *ngFor="let user of users" [value]="user.fullName">
        {{ user.fullName }}
      </option>
    </select>
  </div>

  <!-- Kanban Board -->
  <div class="board row">
    <div class="column col-3" *ngFor="let status of statuses">
      @if(hasTicketsForStatus(status)) {
      <h3>{{ status }}</h3>
      <div
        class="ticket-card"
        *ngFor="let ticket of getFilteredTickets(status)"
      >
        <div class="card card-bg">
          <div class="card-body ticket-bg border" id="3">
            <!-- Ticket Fields with Labels -->
            <div class="ticket-header">
              <span class="label">Summary:</span>
              <div class="ticket-value">{{ ticket.summary }}</div>
            </div>

            <div class="ticket-header">
              <span class="label">Assigned To:</span>
              <div class="ticket-value">{{ ticket.assignedTo }}</div>
            </div>

            <div class="ticket-header">
              <span class="label">Story Points:</span>
              <div class="ticket-value">{{ ticket.storyPoint }}</div>
            </div>
          </div>
          <div class="card-footer ticket-bg border justify-content-between">
            <button
              (click)="editTicket(ticket)"
              data-bs-toggle="modal"
              data-bs-target="#myModal"
              class="edit-btn"
            >
              ‚úèÔ∏è Edit
            </button>
            <button class="delete-btn" (click)="deleteTicket(ticket.ticketId)">
              üóëÔ∏è Delete
            </button>
          </div>
        </div>
      </div>
      }
    </div>
  </div>
</div>

<!-- Edit Modal -->
<div class="modal fade" id="myModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">üìù Edit Ticket</h4>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
        ></button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-12">
            <label>Summary:</label>
            <input
              type="text"
              name="summary"
              class="form-control"
              [(ngModel)]="selectedTicket.summary"
            />
          </div>
          <div class="col-12">
            <label>Description:</label>
            <textarea
              class="form-control"
              [(ngModel)]="selectedTicket.description"
            ></textarea>
          </div>
          <div class="col-6">
            <label>Story Points:</label>
            <input
              type="number"
              class="form-control"
              [(ngModel)]="selectedTicket.storyPoint"
            />
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary save-btn" (click)="saveChanges()">
          Save
        </button>
        <button class="btn btn-secondary cancel-btn" data-bs-dismiss="modal">
          Cancel
        </button>
      </div>
    </div>
  </div>
</div>
